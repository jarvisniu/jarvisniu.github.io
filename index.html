<!DOCTYPE html>
<html lang="en">
<head>
  <title>牛俊为</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="./favicon.png">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700italic,700,400italic|Inconsolata'
        rel='stylesheet' type='text/css'>
  <style type="text/css">

    /* overall */
    * {
      margin: 0;
      padding: 0;
    }

    html {
      height: 100%;
      background-color: #eee;
    }

    body {
      font-family: 'Open Sans', sans-serif;
      font-size: 14px;
      max-width: 800px;
      height: 100%;
      margin: 0 auto;
      background-color: #f8f8f8;
    }

    a {
      color: black;
      text-decoration: none;
    }

    a:hover {
      /*background: #ccc;*/
      text-decoration: underline;
      /*border: solid 1px gray;*/
    }

    .title {
      font-size: 2.6em;
      padding: 0.6em;
      background-color: #088;
      color: #eee;
      font-family: "Open Sans", sans-serif;
      font-weight: normal;
    }

    pre {
      margin: 0px;
      padding: 20px;
      border: 1px solid #EAEAEA;
      border-radius: 4px;
      background-color: rgb(248, 248, 248);
      font-size: 15px;
    }

    code, pre {
      font-family: 'Inconsolata', Consolas, Menlo, Monaco, "Courier New", monospace;
      color: #0C4B33;
      font-size: 1.07em;
    }

    .mainbody {
      min-height: calc(100% - 40px);
      border: solid #ccc;
      border-width: 0 0.1em;
      background-color: #f8f8f8;
    }

    footer {
      height: 40px;
      line-height: 40px;
      background-color: #444;
      color: #bbb;
      text-align: center;
      vertical-align: middle;
    }

    /* nav */

    nav {
      height: 32px;
      border: solid #ccc;
      border-width: 1px 0;
      background-color: #ddd;
      -webkit-user-select: none;
    }

    nav > a {
      display: inline-block;
      float: left;
      height: 20px;
      border: solid #ccc;
      border-width: 0 1px 0 0;
      padding: 6px 10px;
    }

    nav > a:hover {
      background-color: #eee;
      text-decoration: none;
    }

    nav > a:active {
      background-color: #ccc;
    }

    nav > a.selected {
      height: 21px;
      background-color: #f8f8f8;
      color: #088;
    }

    #socialPanel {
      display: inline-flex;
      float: right;
      margin: 1px;
      padding: 0.15em;
      border-width: 0;
      cursor: default;
    }

    #imgLang {
      width: 26px;
      height: 18px;
      padding: 3px;
    }

    .icon {
      width: 20px;
      height: 20px;
      margin: 2px;
    }

    .social {
      margin-right: 2px;
    }

    .social {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: solid 1px #ddd;
    }

    .social:hover {
      border-color: gray;
    }

    /* blog */

    #blog_title {
      text-align: center;
      font-size: 2em;
      margin: 32px 8px 24px 8px;
    }

    #blog_date {
      text-align: center;
      font-size: 1.1em;
    }

    /* page */

    article {
      padding: 16px;
      display: none;
    }

    .show {
      display: block;
    }

    #body_blog_list a {
      display: block;
    }

    #body_blog_text {
      padding: 0;
    }

    iframe {
      border: none;
      width: 100%;
    }

    /* work */
    .work-frame {
      display: inline-block;
      width: 240px;
      height: 180px;
      border: solid 1px gray;
      margin: 4px;
    }

    .work-frame img {
      display: flex;
      width: 100%;
      height: calc(100% - 30px);
    }

    .work-frame p {
      position: relative;
      box-sizing: border-box;
      border: solid gray;
      border-width: 1px 0 0 0;
      line-height: 30px;
      height: 30px;
      background-color: #ddd;
      padding: 0 6px;
    }

    /* 适应小屏 */
    @media screen and (max-width: 400px) {
      .work-frame {
        width: calc(100% - 8px);
        height: 100%;
      }
    }

    #blog_text {
      font-family: Helvetica, arial, sans-serif;
      font-size: 14px;
      line-height: 1.6;
      padding: 24px 32px 32px 32px;
    }

    #blog_text > *:first-child {
      margin-top: 0 !important;
    }

    #blog_text > *:last-child {
      margin-bottom: 0 !important;
    }

    #blog_text a {
      color: #4183C4;
    }

    #blog_text a.absent {
      color: #cc0000;
    }

    #blog_text a.anchor {
      display: block;
      padding-left: 30px;
      margin-left: -30px;
      cursor: pointer;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
    }

    #blog_text h1, h2, h3, h4, h5, h6 {
      margin: 20px 0 10px;
      padding: 0;
      font-weight: bold;
      -webkit-font-smoothing: antialiased;
      cursor: text;
      position: relative;
    }

    #blog_text h1 {
      font-size: 28px;
      color: black;
    }

    #blog_text h2 {
      font-size: 24px;
      border-bottom: 1px solid #cccccc;
      color: black;
    }

    #blog_text h3 {
      font-size: 18px;
    }

    #blog_text h4 {
      font-size: 16px;
    }

    #blog_text h5 {
      font-size: 14px;
    }

    #blog_text h6 {
      color: #777777;
      font-size: 14px;
    }

    #blog_text p, blockquote, ul, ol, dl, li, table, pre {
      margin: 15px 0;
    }

    #blog_text hr {
      /*background: transparent url("../../images/modules/pulls/dirty-shade.png") repeat-x 0 0;*/
      border: 0 none;
      background-color: #ccc;
      height: 4px;
      padding: 0;
    }

    #blog_text > h2:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    #blog_text > h1:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    #blog_text > h1:first-child + h2 {
      margin-top: 0;
      padding-top: 0;
    }

    #blog_text > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
      margin-top: 0;
    }

    #blog_text li p.first {
      display: inline-block;
    }

    #blog_text ul, ol {
      padding-left: 30px;
    }

    #blog_text ul :first-child, #blog_text ol :first-child {
      margin-top: 0;
    }

    #blog_text ul :last-child, #blog_text ol :last-child {
      margin-bottom: 0;
    }

    #blog_text dl {
      padding: 0;
    }

    #blog_text dl dt {
      font-size: 14px;
      font-weight: bold;
      font-style: italic;
      padding: 0;
      margin: 15px 0 5px;
    }

    #blog_text dl dt:first-child {
      padding: 0;
    }

    #blog_text dl dt > :first-child {
      margin-top: 0;
    }

    #blog_text dl dt > :last-child {
      margin-bottom: 0;
    }

    #blog_text dl dd {
      margin: 0 0 15px;
      padding: 0 15px;
    }

    #blog_text dl dd > :first-child {
      margin-top: 0;
    }

    #blog_text dl dd > :last-child {
      margin-bottom: 0;
    }

    #blog_text blockquote {
      border-left: 4px solid #dddddd;
      padding: 0 15px;
      color: #777777;
    }

    #blog_text blockquote > :first-child {
      margin-top: 0;
    }

    #blog_text blockquote > :last-child {
      margin-bottom: 0;
    }

    #blog_text table {
      padding: 0;
    }

    #blog_text table tr {
      border-top: 1px solid #cccccc;
      background-color: white;
      margin: 0;
      padding: 0;
    }

    #blog_text table tr:nth-child(2n) {
      background-color: #f8f8f8;
    }

    #blog_text table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px;
    }

    #blog_text table tr td {
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px;
    }

    #blog_text table tr th :first-child, table tr td :first-child {
      margin-top: 0;
    }

    #blog_text table tr th :last-child, table tr td :last-child {
      margin-bottom: 0;
    }

    #blog_text img {
      max-width: 100%;
    }

    #blog_text span.frame {
      display: block;
      overflow: hidden;
    }

    #blog_text span.frame > span {
      border: 1px solid #dddddd;
      display: block;
      float: left;
      overflow: hidden;
      margin: 13px 0 0;
      padding: 7px;
      width: auto;
    }

    #blog_text span.frame span img {
      display: block;
      float: left;
    }

    #blog_text span.frame span span {
      clear: both;
      color: #333333;
      display: block;
      padding: 5px 0 0;
    }

    #blog_text span.align-center {
      display: block;
      overflow: hidden;
      clear: both;
    }

    #blog_text span.align-center > span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: center;
    }

    #blog_text span.align-center span img {
      margin: 0 auto;
      text-align: center;
    }

    #blog_text span.align-right {
      display: block;
      overflow: hidden;
      clear: both;
    }

    #blog_text span.align-right > span {
      display: block;
      overflow: hidden;
      margin: 13px 0 0;
      text-align: right;
    }

    #blog_text span.align-right span img {
      margin: 0;
      text-align: right;
    }

    #blog_text span.float-left {
      display: block;
      margin-right: 13px;
      overflow: hidden;
      float: left;
    }

    #blog_text span.float-left span {
      margin: 13px 0 0;
    }

    #blog_text span.float-right {
      display: block;
      margin-left: 13px;
      overflow: hidden;
      float: right;
    }

    #blog_text span.float-right > span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: right;
    }

    #blog_text code, tt {
      margin: 0 2px;
      padding: 2px 5px;
      border: 1px solid #cccccc;
      background-color: #e8e8e8;
      border-radius: 3px;
      word-break: break-word;
      white-space: pre;
    }

    #blog_text pre code {
      margin: 0;
      padding: 0;
      white-space: pre;
      border: none;
      background: transparent;
    }

    #blog_text .highlight pre {
      background-color: #e8e8e8;
      border: 1px solid #cccccc;
      font-size: 13px;
      line-height: 19px;
      overflow: auto;
      padding: 6px 10px;
      border-radius: 3px;
    }

    #blog_text pre {
      background-color: #e8e8e8;
      border: 1px solid #cccccc;
      font-size: 13px;
      line-height: 19px;
      overflow: auto;
      padding: 6px 10px;
      border-radius: 3px;
    }

    #blog_text pre code, pre tt {
      background-color: transparent;
      border: none;
    }

    /*end of css*/

  </style>
  <script src="js/Za-core.min.js"></script>

</head>
<body>
<script type="text/javascript">

  var hashPath;

  // dom
  var header;
  var nav_blog, nav_projects, nav_about;
  var body_blog_list, body_blog_text, body_projects, body_about;

  var LOADING = "Loading...";
  var ERROR404 = "<h1>Error 404</h1>Sorry, this article: <strong>{title}</strong> does not exist, or has been deleted!";

  // i18n
  var langData = {
    "title": {
      "zh": "牛俊为",
      "en": "Jarvis Niu",
    },
    "blog": {
      "zh": "博客",
      "en": "Blog",
    },
    "projects": {
      "zh": "项目",
      "en": "Projects",
    },
    "tools": {
      "zh": "工具",
      "en": "Tools",
    },
    "about": {
      "zh": "关于",
      "en": "About",
    },
    "project_niv": {
      "zh": "小牛看图：简约快速的看图软件",
      "en": "Niv: A fast image viewer",
    },
    "project_bu_js": {
      "zh": "Bu.js：一个Canvas图形库",
      "en": "Bu.js: A Canvas 2D Graphics Library",
    },
    "project_weblab": {
      "zh": "Weblab：在线代码编辑器",
      "en": "Bu.js: An online code editor",
    },
    "project_3d_map": {
      "zh": "WebGL三维地图",
      "en": "A WebGL 3D Map",
    },
    "project_2d_map": {
      "zh": "Canvas二维地图",
      "en": "A Canvas 2D Map",
    },
    "project_scalable_chart": {
      "zh": "可缩放折线图",
      "en": "Scalable Line Chart",
    },
    "tool_jsotg": {
      "zh": "JS手机编程",
      "en": "JS OTG",
    },
    "tool_mde": {
      "zh": "Markdown编辑器",
      "en": "Markdown Editor",
    },
    "tool_currencies": {
      "zh": "世界货币",
      "en": "Currencies Of The World",
    },
    "tool_css_formatting": {
      "zh": "在线CSS格式化",
      "en": "CSS Formatting Online",
    },
    "tool_html_2_jade": {
      "zh": "HTML到Jade转换器",
      "en": "HTML to Jade",
    },
    "tool_url_docoder": {
      "zh": "URL解析",
      "en": "URL decoder",
    },
    "tool_query_string_decoder": {
      "zh": "查询字符串解析",
      "en": "Query String Decoder",
    },
    "tool_bach_address_gen": {
      "zh": "批量地址生成",
      "en": "Batch Address Genarator",
    },
    "tool_zh_trans": {
      "zh": "简繁转换",
      "en": "Simplified/Traditional Chinese Translator",
    },
    "intro1": {
      "zh": "我叫牛俊为，我的梦想是当一名好的程序员。<br><br>我从高中开始自学编程至今，喜欢尝试各种不同的编程平台。从桌面平台的VB6到.NET，到移动平台的Java和Android，再到开源硬件的Arduino，最后到Web平台的JS和PHP。就这样，我在好奇心引领下，乐此不疲地学习了一项又一项的新技术。虽然看似学了不少东西，但真正深入研究了的其实并不多。<br><br>我目前的工作是Web开发。<br><br>我的业余爱好是打乒乓球和玩游戏，最喜欢的游戏是我的世界。",
      "en": "I am Jarvis Niu. I am a program developer in Beijing. ",
    },
  };
  var i18n = new Za.i18n(langData);

  // blog
  var pendingTitle;  // 挂起的博文标题
  var markdownItReady = false;
  var blogList = {
    "cmd-abort-in-advance": {
      title: "解决CMD命令不能连续执行的问题",
      date: "2016-01-24"
    },
    "d3.js-data-enter-exit": {
      title: "d3.js中data(), enter() 和 exit()的作用",
      date: "2015-08-17"
    },
    "install-windows-tutorial": {
      title: "牛哥教你如何用U盘装系统",
      date: "2016-03-01"
    },
  };

  function initBlogList() {
    var str = '';
    for (var url in blogList) {
      if (!blogList.hasOwnProperty(url)) continue;

      var article = blogList[url];
      str += '<a href="' + '#!/blog/' + url + '">';
      str += article.title + " - " + article.date;
      str += '</a>';
    }
    body_blog_list.innerHTML = str;
  }

  // 初始化页面
  function init() {
    header = document.getElementsByTagName("h1")[0];
    initNav();
    initBlogList();
    onSwitchLang();
    loadArticle('');
    window.addEventListener("hashchange", onHashChanged);
    document.querySelector(".mainbody").style.visibility = "";
  }

  document.addEventListener("DOMContentLoaded", init);

  function initNav() {
    nav_blog = document.getElementById("nav_blog");
    nav_projects = document.getElementById("nav_projects");
    nav_about = document.getElementById("nav_about");

    body_blog_list = document.getElementById("body_blog_list");
    body_blog_text = document.getElementById("body_blog_text");
    body_projects = document.getElementById("body_projects");
    body_about = document.getElementById("body_about");

    hashPath = getHashPath();

    onHashChanged();
  }

  // 路由
  function onHashChanged() {
    if (hashPath == "blog") {
      nav_blog.classList.remove("selected");
      body_blog_list.classList.remove("show");
    } else if (hashPath == "projects") {
      nav_projects.classList.remove("selected");
      body_projects.classList.remove("show");
    } else if (hashPath == "tools") {
      nav_tools.classList.remove("selected");
      body_tools.classList.remove("show");
    } else if (hashPath == "about") {
      nav_about.classList.remove("selected");
      body_about.classList.remove("show");
    } else if (hashPath.indexOf("blog/") == 0) {
      body_blog_text.classList.remove("show");
      loadArticle("");
    }

    hashPath = getHashPath();

    if (hashPath == "blog") {
      nav_blog.classList.add("selected");
      body_blog_list.classList.add("show");
      document.title = _("blog") + " - " + _("title");
    } else if (hashPath == "projects") {
      nav_projects.classList.add("selected");
      body_projects.classList.add("show");
      document.title = _("projects") + " - " + _("title");
    } else if (hashPath == "tools") {
      nav_tools.classList.add("selected");
      body_tools.classList.add("show");
      document.title = _("tools") + " - " + _("title");
    } else if (hashPath == "about") {
      nav_about.classList.add("selected");
      body_about.classList.add("show");
      document.title = _("about") + " - " + _("title");
    } else if (hashPath.indexOf("blog/") == 0) {
      var articleTitle = hashPath.substring(5);
      loadArticle(articleTitle);
      body_blog_text.classList.add("show");
      if (articleTitle in blogList)
        document.title = blogList[articleTitle].title + " - " + _("title");
    } else {
      alert("Error 404 \n 不存在此页面: " + hashPath);
    }
  }

  function _(key) {
    return langData[key][i18n.lang];
  }


  function getHashPath() {
    var path = location.hash.replace("#!/", "");
    if (path == "") path = "projects";
    return path;
  }

  function loadArticle(article) {
    if (article == '') {
      showHtml(LOADING);
    } else if (markdownItReady) {
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
          showMd(xhr.responseText);
        } else if (xhr.status == 404) {
          showHtml(ERROR404.replace("{title}", title));
        }
      };
      var url = "blog/" + article + ".md";
      xhr.open("GET", url);
      xhr.send();
      setBlogTitle(article);
    } else {
      pendingTitle = article;
    }
  }

  function onLoadMarkdownIt() {
    mdit = new markdownit();
    markdownItReady = true;
    if (pendingTitle != null) {
      loadArticle(pendingTitle);
    }
  }

  function showMd(md) {
    document.querySelector("#blog_text").innerHTML = mdit.render(md);
  }

  function showHtml(html) {
    document.querySelector("#blog_text").innerHTML = html;
  }

  function setBlogTitle(id) {
    if (id in blogList) {
      document.querySelector("#blog_title").innerHTML = blogList[id].title;
      document.querySelector("#blog_date").innerHTML = blogList[id].date;
    }
  }

  function switchLang() {
    i18n.switchLang();
    onSwitchLang()
  }

  function onSwitchLang() {
    if (i18n.lang == "en") {
      document.getElementById("imgLang").src = "img/flags/flag-cn.png";
      document.documentElement.setAttribute("lang", "en");
    } else {
      document.getElementById("imgLang").src = "img/flags/flag-us.png";
      document.documentElement.setAttribute("lang", "zh");
    }
    onHashChanged();
  }

  function setHashUrl(url) {
    if (url === undefined || url == "") {
      location.hash = "";
    } else {
      if (url.indexOf("/") != 0) url = "/" + url;
      location.hash = "#!" + url;
    }
  }

</script>
<div class="mainbody" style="visibility: hidden;">

  <header>
    <h1 class="title">{{ title }}</h1>
  </header>

  <nav>
    <a id="nav_projects" href="#!/projects">{{ projects }}</a>
    <a id="nav_blog" href="#!/blog">{{ blog }}</a>
    <a id="nav_tools" href="#!/tools">{{ tools }}</a>
    <a id="nav_about" href="#!/about">{{ about }}</a>
  <span id="socialPanel">
    <a class="social" target="_blank" href="http://weibo.com/jarvisniu">
      <img class="icon" src="img/icons/weibo-32.png">
    </a>
    <a class="social" target="_blank" href="http://github.com/jarvisniu">
      <img class="icon" src="img/icons/github-32.png">
    </a>
    <img class="social" id="imgLang" src="img/flags/flag-us.png" onclick="switchLang(this);">
  </span>
  </nav>

  <article id="body_blog_list">
  </article>

  <article id="body_blog_text">
    <h1 id="blog_title"></h1>

    <div id="blog_date"></div>
    <div id="blog_text"></div>
  </article>

  <article id="body_projects">
    <div class="work-frame">
      <a href="niv/" target="_blank">
        <img src="img/projects/niv.png">
        <p>{{ project_niv }}</p>
      </a>
    </div>
    <div class="work-frame">
      <a href="Bu.js/" target="_blank">
        <img src="img/projects/bu.js.png">
        <p>{{ project_bu_js }}</p>
      </a>
    </div>
    <div class="work-frame">
      <a href="projects/weblab" target="_blank">
        <img src="img/projects/weblab.png">
        <p>{{ project_weblab }}</p>
      </a>
    </div>
    <div class="work-frame">
      <a href="projects/webgis/" target="_blank">
        <img src="img/projects/webgis.jpg">
        <p>{{ project_3d_map }}</p>
      </a>
    </div>
    <div class="work-frame">
      <a href="projects/2d_map/" target="_blank">
        <img src="img/projects/2dmap.jpg">
        <p>{{ project_2d_map }}</p>
      </a>
    </div>
    <div class="work-frame">
      <a href="projects/line_chart/" target="_blank">
        <img src="img/projects/chart.png">
        <p>{{ project_scalable_chart }}</p>
      </a>
    </div>
  </article>

  <article id="body_tools">
    <p><a target="_blank" href="tools/js_otg/index.html">{{ tool_jsotg }}</a></p>

    <p><a target="_blank" href="tools/mde/index.html">{{ tool_mde }}</a></p>

    <p><a target="_blank" href="tools/currencies.html">{{ tool_currencies }}</a></p>

    <p><a target="_blank" href="http://html2jade.vida.io/">{{ tool_html_2_jade }}</a></p>

    <p><a target="_blank" href="http://tool.oschina.net/codeformat/css">{{ tool_css_formatting }}</a></p>

    <p><a target="_blank" href="tools/url-decoder.html">{{ tool_url_docoder }}</a></p>

    <p><a target="_blank" href="tools/url-query-string-docoder.html">{{ tool_query_string_decoder }}</a></p>

    <p><a target="_blank" href="tools/zh-trans.html">{{ tool_zh_trans }}</a></p>

    <p><a target="_blank" href="tools/batch-address-gen.html">{{ tool_bach_address_gen }}</a></p>
  </article>

  <article id="body_about">
    <p>{{ intro1 }}</p>
  </article>

</div>

<footer>
  © 2016 Jarvis Niu
</footer>

<script>

  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
    a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  ga('create', 'UA-72558673-1', 'auto');
  ga('send', 'pageview');

</script>
<script src="js/lib/markdown-it.min.js" async onload="onLoadMarkdownIt();"></script>
</body>
</html>
