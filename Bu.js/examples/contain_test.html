<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Contains test</title>
	<script src="../build/bu.js"></script>
	<link rel="stylesheet" href="css/example.css">
	<script type="text/javascript">
		var bu = new Bu.App({
			renderer: {
				cursor: 'crosshair',
				showKeyPoints: true,
				showBounds: true,
			},
			data: {
				mousePos: new Bu.Vector(),
				randomizer: new Bu.ShapeRandomizer(),
			},
			objects: function () {
				var r = this.randomizer;
				return {
					circle: r.generateCircle().createBounds(),
					ellipse: r.generateEllipse().createBounds(),
					triangle: r.generateTriangle().createBounds(),
					rectangle: r.generateRectangle(),
					fan: r.generateFan().createBounds(),
					bow: r.generateBow().createBounds(),
					polygon: r.generatePolygon().createBounds(),
				};
			},
			hierarchy: {
				circle: {},
				ellipse: {},
				triangle: {},
				rectangle: {},
				fan: {},
				bow: {},
				polygon: {},
			},
			init: function () {
				this.randomizer.setRange(this.$renderer.width, this.$renderer.height);
				$("#btnShowBounds").on('click', function () {
					bu.$renderer.showBounds = this.checked;
				});

				// Hit-testing still works fine after transformations
				this.$objects.circle.translate(100, 100).rotate(Bu.d2r(30));
			},
			methods: {
				regenerateShapes: function () {
					var o = this.$objects;
					this.randomizer.randomize(this.$renderer.scene.children);
				},
			},
			events: {
				mousemove: function (e) {
					var o = this.$objects;

					for (var i in o) {
						if (!o.hasOwnProperty(i)) continue;
						var shape = o[i];

						if (shape.hitTest(this.mousePos.set(e.offsetX, e.offsetY)))
							shape.style('hover');
						else
							shape.style();
					}
				},
				mouseup: function () {
					this.regenerateShapes();
				},
			},
		});

	</script>
</head>

<body>
<div id="info">
	<span>Move cursor to test. Click to regenerate shapes.</span>
</div>
<div id="control">
	<input id="btnShowBounds" type="checkbox" checked>
	<label for="btnShowBounds">Show Bounds</label>
</div>
</body>

</html>
