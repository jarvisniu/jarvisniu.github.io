<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Draw Polygon</title>
    <script src="../../lib/za_geom2d.min.js"></script>
    <script src="../../src/Bu.dev.js"></script>
    <script type="text/javascript">
      var renderer;
      var polygon;
      var mousePos = new Bu.Point();
      
      $.ready(init);
      
      function init() {
        // renderer
        renderer = new Bu.Renderer({
          container: "#container"
        });
        // polygon
        var points = [];
        polygon = new Bu.Polygon(points);
        renderer.append(polygon);
        // events
        renderer.dom.addEventListener("mousemove", onMouseMove);
        renderer.dom.addEventListener("mousedown", onMouseDown);
        $("#btnAdd").on("click", function () {
          console.log("123");
          var x = Math.rand(renderer.width);
          var y = Math.rand(renderer.height);
          var n = $("#txtN")[0].value;
          var r = $("#txtRadius")[0].value;
          renderer.append(new Bu.Polygon(x, y, n, {radius: r}));
        });
      }
      
      function onMouseMove(e) {
        mousePos.set(e.offsetX, e.offsetY);
        if (polygon.containsPoint(mousePos))
          polygon.fillStyle = Bu.DEFAULT_FILL_STYLE_HOVER;
        else
          polygon.fill();
      }
      
      function onMouseDown(e) {
        polygon.addPoint(mousePos.clone());
      }
      
    </script>
  </head>
  <body>
    <div>Click to add point to the default polygon.</div>
    <div style="margin: 8px 0;">Or add regular polygon whose
      <label>n=
        <input id="txtN" type="text" style="width: 40px" value="6">
      </label>and
      <label>radius=
        <input id="txtRadius" type="text" style="width: 40px" value="50">
      </label>
      <button id="btnAdd">Add</button>
    </div>
    <div id="container"></div>
  </body>
</html>